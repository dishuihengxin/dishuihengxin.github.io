class CodeEnhancer{constructor(){this.init()}init(){this.enhanceCodeBlocks(),this.addCopyButtons(),this.setupSyntaxHighlighting(),this.enhanceTables()}enhanceCodeBlocks(){const e=document.querySelectorAll("pre code");e.forEach((e,t)=>{const n=e.parentElement,o=this.detectLanguage(e),s=document.createElement("div");s.className="code-block";const i=this.createCodeHeader(o,t);n.parentNode.insertBefore(s,n),s.appendChild(i),s.appendChild(n),n.classList.add(`language-${o}`),this.shouldAddLineNumbers(o)&&this.addLineNumbers(n)})}detectLanguage(e){const n=e.className||"",t=n.match(/language-(\w+)/);return t&&t[1]?t[1]:"text"}createCodeHeader(e,t){const n=document.createDocumentFragment(),s=this.createCopyButton(t);return n.appendChild(s),n}getLanguageDisplayName(e){const t={js:"JavaScript",javascript:"JavaScript",ts:"TypeScript",typescript:"TypeScript",py:"Python",python:"Python",java:"Java",cpp:"C++",c:"C",cs:"C#",php:"PHP",rb:"Ruby",ruby:"Ruby",go:"Go",rs:"Rust",rust:"Rust",sh:"Shell",bash:"Bash",zsh:"Zsh",sql:"SQL",html:"HTML",css:"CSS",scss:"SCSS",sass:"Sass",json:"JSON",xml:"XML",yaml:"YAML",yml:"YAML",md:"Markdown",markdown:"Markdown",dockerfile:"Dockerfile",nginx:"Nginx",apache:"Apache",text:"Plain Text"};return t[e.toLowerCase()]||e.toUpperCase()}createCopyButton(e){const n=document.createElement("button");n.className="code-copy-btn",n.setAttribute("data-code-index",e),n.setAttribute("aria-label","Copy code");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("aria-hidden","true"),t.setAttribute("height","16"),t.setAttribute("viewBox","0 0 16 16"),t.setAttribute("width","16"),t.classList.add("octicon","octicon-copy");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("fill","currentColor"),s.setAttribute("d","M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("fill","currentColor"),o.setAttribute("d","M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"),t.appendChild(s),t.appendChild(o),n.appendChild(t),n.addEventListener("click",()=>this.copyCode(n,e)),n}addCopyButtons(){}async copyCode(e){const n=e.closest(".code-block");if(!n){console.error("Code block container not found");return}const s=n.querySelector("pre code")||n.querySelector("code");if(!s){console.error("Code element not found within container");return}const o=s.textContent;try{for(await navigator.clipboard.writeText(o),e.classList.add("copied");e.firstChild;)e.removeChild(e.firstChild);const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("aria-hidden","true"),t.setAttribute("height","16"),t.setAttribute("viewBox","0 0 16 16"),t.setAttribute("width","16"),t.classList.add("octicon","octicon-check");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("fill","currentColor"),n.setAttribute("d","M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"),t.appendChild(n),e.appendChild(t),setTimeout(()=>{if(e.classList.contains("copied")){for(e.classList.remove("copied");e.firstChild;)e.removeChild(e.firstChild);const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("aria-hidden","true"),t.setAttribute("height","16"),t.setAttribute("viewBox","0 0 16 16"),t.setAttribute("width","16"),t.classList.add("octicon","octicon-copy");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("fill","currentColor"),n.setAttribute("d","M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("fill","currentColor"),s.setAttribute("d","M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"),t.appendChild(n),t.appendChild(s),e.appendChild(t)}},2e3)}catch(e){console.error("Failed to copy code:",e),this.selectText(s)}}selectText(e){const t=document.createRange();t.selectNodeContents(e);const n=window.getSelection();n.removeAllRanges(),n.addRange(t)}shouldAddLineNumbers(){return!1}addLineNumbers(){}setupSyntaxHighlighting(){typeof Prism!="undefined"&&Prism.highlightAll()}customHighlighting(){const e=document.querySelectorAll("pre code");e.forEach(e=>{const t=this.detectLanguage(e);switch(t){case"javascript":case"js":this.highlightJavaScript(e);break;case"python":case"py":this.highlightPython(e);break;case"css":this.highlightCSS(e);break}})}highlightJavaScript(e){let t=e.innerHTML;const n=["const","let","var","function","return","if","else","for","while","class","extends","import","export","default"];n.forEach(e=>{const n=new RegExp(`\\b${e}\\b`,"g");t=t.replace(n,`<span class="keyword">${e}</span>`)}),t=t.replace(/(["'`])((?:\\.|(?!\1)[^\\])*?)\1/g,'<span class="string">$1$2$1</span>'),t=t.replace(/\/\/.*$/gm,'<span class="comment">$&</span>'),t=t.replace(/\/\*[\s\S]*?\*\//g,'<span class="comment">$&</span>'),e.innerHTML=t}highlightPython(e){let t=e.innerHTML;const n=["def","class","if","elif","else","for","while","try","except","finally","import","from","return","yield"];n.forEach(e=>{const n=new RegExp(`\\b${e}\\b`,"g");t=t.replace(n,`<span class="keyword">${e}</span>`)}),t=t.replace(/(["'])((?:\\.|(?!\1)[^\\])*?)\1/g,'<span class="string">$1$2$1</span>'),t=t.replace(/#.*$/gm,'<span class="comment">$&</span>'),e.innerHTML=t}highlightCSS(e){let t=e.innerHTML;t=t.replace(/^([^{]+)(?=\s*{)/gm,'<span class="selector">$1</span>'),t=t.replace(/([a-z-]+)(?=\s*:)/g,'<span class="property">$1</span>'),t=t.replace(/:([^;]+);/g,': <span class="value">$1</span>;'),e.innerHTML=t}enhanceTables(){const e=document.querySelectorAll(".prose table");e.forEach(e=>{const t=document.createElement("div");t.className="table-wrapper overflow-x-auto",e.parentNode.insertBefore(t,e),t.appendChild(e),this.addTableSorting(e)})}addTableSorting(e){const t=e.querySelectorAll("th");t.forEach((t,n)=>{t.style.cursor="pointer",t.addEventListener("click",()=>{this.sortTable(e,n)});const s=document.createElement("span");s.className="sort-icon ml-1 text-gray-400",s.innerHTML="↕️",t.appendChild(s)})}sortTable(e,t){const s=e.querySelector("tbody"),o=Array.from(s.querySelectorAll("tr")),n=e.getAttribute("data-sort-direction")!=="asc";e.setAttribute("data-sort-direction",n?"asc":"desc"),o.sort((e,s)=>{const o=e.cells[t].textContent.trim(),i=s.cells[t].textContent.trim(),a=parseFloat(o),r=parseFloat(i);return!isNaN(a)&&!isNaN(r)?n?a-r:r-a:n?o.localeCompare(i):i.localeCompare(o)}),o.forEach(e=>s.appendChild(e));const i=e.querySelectorAll("th .sort-icon");i.forEach((e,s)=>{s===t?(e.innerHTML=n?"↑":"↓",e.className="sort-icon ml-1 text-primary-600"):(e.innerHTML="↕️",e.className="sort-icon ml-1 text-gray-400")})}}class CodeDiff{static create(e,t,n){const s=this.computeDiff(e,t),o=this.renderDiff(s);n.innerHTML=o,n.className="code-diff"}static computeDiff(e,t){const o=e.split(`
`),a=t.split(`
`),i=[];let n=0,s=0;for(;n<o.length||s<a.length;)n>=o.length?(i.push({type:"added",content:a[s]}),s++):s>=a.length?(i.push({type:"removed",content:o[n]}),n++):o[n]===a[s]?(i.push({type:"unchanged",content:o[n]}),n++,s++):(i.push({type:"removed",content:o[n]}),i.push({type:"added",content:a[s]}),n++,s++);return i}static renderDiff(e){return e.map(e=>{const t=e.type==="added"?"+":e.type==="removed"?"-":" ";return`<div class="line ${e.type}">${t} ${e.content}</div>`}).join("")}}document.addEventListener("DOMContentLoaded",()=>{window.codeEnhancer=new CodeEnhancer,window.CodeDiff=CodeDiff}),typeof module!="undefined"&&module.exports&&(module.exports={CodeEnhancer,CodeDiff})