class ConfigManager{constructor(){this.config=this.loadConfig(),this.observers=new Map,this.initialized=!1,this.init()}init(){if(this.initialized)return;this.setupEnvironmentDetection(),this.setupConfigValidation(),this.setupConfigWatchers(),this.loadUserPreferences(),this.initialized=!0,this.notifyObservers("initialized",this.config)}loadConfig(){return{environment:{isDevelopment:window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",isProduction:window.location.protocol==="https:",enableDebug:!1,enableAnalytics:!0,enableServiceWorker:!0},performance:{enableLazyLoading:!0,enableCodeSplitting:!0,enableResourceHints:!0,enableCriticalCSS:!0,enableImageOptimization:!0,enableCaching:!0,cacheStrategy:"stale-while-revalidate",cacheDuration:864e5,enableCompression:!0,enableMinification:!0,enableTreeShaking:!0,enableBundleAnalysis:!1,performanceBudget:{maxBundleSize:25e4,maxImageSize:5e5,maxTotalSize:2e6,maxLoadTime:3e3}},seo:{enableStructuredData:!0,enableOpenGraph:!0,enableTwitterCards:!0,enableCanonicalUrls:!0,enableHreflang:!0,enableSitemap:!0,enableRobotsMeta:!0,enableSchemaMarkup:!0,enableBreadcrumbs:!0,enableMetaOptimization:!0,defaultImageAlt:"Tech Blog Image",defaultDescription:"Advanced technical blog with cutting-edge insights",maxDescriptionLength:160,maxTitleLength:60},security:{enableCSP:!0,enableXSSProtection:!0,enableHTTPS:!0,enableSRI:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,enableContentTypeNoSniff:!0,enableFrameOptions:!0,cspDirectives:{"default-src":["'self'"],"script-src":["'self'","'unsafe-inline'","'unsafe-eval'","https://www.google-analytics.com"],"style-src":["'self'","'unsafe-inline'","https://fonts.googleapis.com"],"img-src":["'self'","data:","https:"],"font-src":["'self'","https://fonts.gstatic.com"],"connect-src":["'self'","https://www.google-analytics.com"]}},ux:{enableAnimations:!0,enableTransitions:!0,enableLoadingStates:!0,enableErrorHandling:!0,enableAccessibility:!0,enableKeyboardNavigation:!0,enableFocusManagement:!0,enableReducedMotion:!0,enableHighContrast:!1,enableDarkMode:!0,enableTooltips:!0,enableNotifications:!0,animationDuration:300,transitionDuration:200,debounceDelay:300,throttleDelay:100},mobile:{enablePWA:!0,enableOfflineMode:!0,enableTouchOptimization:!0,enableViewportOptimization:!0,enableMobileMenu:!0,enableSwipeGestures:!0,enablePullToRefresh:!1,enableAppInstall:!0,touchThreshold:10,swipeThreshold:50,tapDelay:300},analytics:{enableGoogleAnalytics:!0,enablePerformanceMonitoring:!0,enableErrorTracking:!0,enableUserBehaviorTracking:!0,enableHeatmaps:!1,enableA11yMonitoring:!0,enableConversionTracking:!1,enableCustomEvents:!0,enableRealUserMonitoring:!0,samplingRate:.1,sessionTimeout:18e5,trackingId:null},codeQuality:{enableLinting:!0,enableTypeChecking:!0,enableFormatting:!0,enableTesting:!0,enableCoverage:!1,enableDocumentation:!0,enableCodeReview:!1,enableStaticAnalysis:!0,lintingRules:"recommended",testThreshold:80,coverageThreshold:70},theme:{defaultTheme:"auto",enableThemeToggle:!0,enableCustomThemes:!1,enableColorSchemes:!0,enableFontScaling:!0,enableLayoutCustomization:!1,themes:["light","dark","auto"],colorSchemes:["default","blue","green","purple"],fontSizes:["small","medium","large"],layouts:["default","compact","wide"]},content:{enableSyntaxHighlighting:!0,enableMathRendering:!1,enableDiagramRendering:!1,enableTableOfContents:!0,enableReadingTime:!0,enableWordCount:!0,enableRelatedPosts:!0,enableComments:!1,enableSharing:!0,enablePrintStyles:!0,maxRelatedPosts:5,readingSpeed:200,excerptLength:150},search:{enableSearch:!0,enableInstantSearch:!0,enableSearchHighlight:!0,enableSearchSuggestions:!0,enableSearchAnalytics:!0,searchProvider:"local",maxResults:10,minQueryLength:2,searchDelay:300,highlightClass:"search-highlight"},api:{enableRateLimiting:!0,enableCaching:!0,enableRetry:!0,enableTimeout:!0,baseUrl:"",timeout:1e4,retryAttempts:3,retryDelay:1e3,rateLimit:100,cacheTimeout:3e5},features:{enableExperimentalFeatures:!1,enableBetaFeatures:!1,enableAdvancedFeatures:!0,enableLegacySupport:!0,enableDebugMode:!1,enableMaintenanceMode:!1,enableFeatureToggling:!0,experimentalFeatures:[],betaFeatures:[],deprecatedFeatures:[]}}}setupEnvironmentDetection(){this.config.environment.isDevelopment=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("dev")||window.location.port!=="",this.config.environment.isProduction=window.location.protocol==="https:"&&!this.config.environment.isDevelopment,this.config.environment.enableDebug=this.config.environment.isDevelopment,this.config.environment.isDevelopment&&(this.config.analytics.enableGoogleAnalytics=!1,this.config.performance.enableMinification=!1,this.config.codeQuality.enableLinting=!0)}setupConfigValidation(){this.validateConfig(this.config)}validateConfig(e){const t=[];return e.performance.performanceBudget.maxBundleSize<0&&t.push("Performance budget maxBundleSize must be positive"),(e.ux.animationDuration<0||e.ux.animationDuration>5e3)&&t.push("Animation duration must be between 0 and 5000ms"),(e.api.timeout<1e3||e.api.timeout>6e4)&&t.push("API timeout must be between 1000 and 60000ms"),t.length>0&&console.warn("Configuration validation errors:",t),t.length===0}setupConfigWatchers(){if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)");e.addListener(e=>{this.config.theme.defaultTheme==="auto"&&this.notifyObservers("themeChanged",e.matches?"dark":"light")});const t=window.matchMedia("(prefers-reduced-motion: reduce)");t.addListener(e=>{this.updateConfig("ux.enableAnimations",!e.matches),this.notifyObservers("motionPreferenceChanged",e.matches)});const n=window.matchMedia("(prefers-contrast: high)");n.addListener(e=>{this.updateConfig("ux.enableHighContrast",e.matches),this.notifyObservers("contrastPreferenceChanged",e.matches)})}window.addEventListener("online",()=>{this.notifyObservers("connectionChanged",!0)}),window.addEventListener("offline",()=>{this.notifyObservers("connectionChanged",!1)})}loadUserPreferences(){try{const e=localStorage.getItem("techBlogConfig");if(e){const t=JSON.parse(e);this.mergeConfig(t)}}catch(e){console.warn("Failed to load user preferences:",e)}}saveUserPreferences(){try{const e=this.extractUserPreferences();localStorage.setItem("techBlogConfig",JSON.stringify(e))}catch(e){console.warn("Failed to save user preferences:",e)}}extractUserPreferences(){return{theme:{defaultTheme:this.config.theme.defaultTheme,enableAnimations:this.config.ux.enableAnimations,enableReducedMotion:this.config.ux.enableReducedMotion},accessibility:{enableHighContrast:this.config.ux.enableHighContrast,enableKeyboardNavigation:this.config.ux.enableKeyboardNavigation},performance:{enableLazyLoading:this.config.performance.enableLazyLoading,enableImageOptimization:this.config.performance.enableImageOptimization}}}get(e,t=null){const s=e.split(".");let n=this.config;for(const e of s)if(n&&typeof n=="object"&&e in n)n=n[e];else return t;return n}set(e,t){const s=e.split(".");let n=this.config;for(let t=0;t<s.length-1;t++){const e=s[t];(!(e in n)||typeof n[e]!="object")&&(n[e]={}),n=n[e]}const o=s[s.length-1],i=n[o];n[o]=t,this.notifyObservers("configChanged",{path:e,value:t,oldValue:i}),this.saveUserPreferences()}updateConfig(e,t){const n=this.get(e);if(this.set(e,t),!this.validateConfig(this.config))throw this.set(e,n),new Error(`Invalid configuration value for ${e}`)}mergeConfig(e){this.config=this.deepMerge(this.config,e),this.validateConfig(this.config),this.notifyObservers("configMerged",this.config)}deepMerge(e,t){const n={...e};for(const s in t)t[s]&&typeof t[s]=="object"&&!Array.isArray(t[s])?n[s]=this.deepMerge(e[s]||{},t[s]):n[s]=t[s];return n}subscribe(e,t){return this.observers.has(e)||this.observers.set(e,new Set),this.observers.get(e).add(t),()=>{const n=this.observers.get(e);n&&n.delete(t)}}notifyObservers(e,t){const n=this.observers.get(e);n&&n.forEach(n=>{try{n(t)}catch(t){console.error(`Error in config observer for ${e}:`,t)}})}reset(){this.config=this.loadConfig(),this.setupEnvironmentDetection(),this.saveUserPreferences(),this.notifyObservers("configReset",this.config)}export(){return JSON.stringify(this.config,null,2)}import(e){try{const t=JSON.parse(e);return this.mergeConfig(t),!0}catch(e){return console.error("Failed to import configuration:",e),!1}}getSummary(){return{environment:this.config.environment,enabledFeatures:this.getEnabledFeatures(),performanceSettings:this.config.performance.performanceBudget,securitySettings:Object.keys(this.config.security).filter(e=>this.config.security[e]===!0)}}getEnabledFeatures(){const e=[];return Object.keys(this.config).forEach(t=>{typeof this.config[t]=="object"&&Object.keys(this.config[t]).forEach(n=>{n.startsWith("enable")&&this.config[t][n]===!0&&e.push(`${t}.${n}`)})}),e}}window.TechBlogConfig=new ConfigManager,typeof module!="undefined"&&module.exports&&(module.exports=ConfigManager),window.ConfigManager=ConfigManager